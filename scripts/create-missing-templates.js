#!/usr/bin/env node

/**
 * Create missing English and Spanish templates for all documents
 */

const fs = require('fs');
const path = require('path');

console.log('üìù Creating Missing Templates...\n');

const templatesDir = path.join(__dirname, '../public/templates');
const enTemplatesDir = path.join(templatesDir, 'en');
const esTemplatesDir = path.join(templatesDir, 'es');
const usDocsDir = path.join(__dirname, '../src/lib/documents/us');

// Get list of all document directories
const documentDirs = fs
  .readdirSync(usDocsDir)
  .filter((item) => {
    const itemPath = path.join(usDocsDir, item);
    return fs.statSync(itemPath).isDirectory();
  })
  .sort();

console.log(`Found ${documentDirs.length} document directories to check...`);

// Template content generators
function generateEnglishTemplate(docId, docName, description) {
  return `# ${docName}

**Professional ${docName} Template**

${description}

---

## Document Information

**Document Type**: ${docName}  
**Jurisdiction**: United States  
**Language**: English  
**Last Updated**: ${new Date().toLocaleDateString()}

---

## Key Sections

### 1. Parties Information
- **First Party**: {{party1Name}}
- **Address**: {{party1Address}}
- **Second Party**: {{party2Name}}  
- **Address**: {{party2Address}}

### 2. Terms and Conditions
{{terms}}

### 3. Effective Date
This agreement shall be effective as of {{effectiveDate}}.

### 4. Additional Provisions
{{additionalProvisions}}

---

## Legal Disclaimer

This template is provided for informational purposes only and does not constitute legal advice. Please consult with a qualified attorney for legal guidance specific to your situation.

---

**Generated by 123LegalDoc**  
*Professional Legal Documents Made Simple*
`;
}

function generateSpanishTemplate(docId, docName, description) {
  return `# ${docName}

**Plantilla Profesional de ${docName}**

${description}

---

## Informaci√≥n del Documento

**Tipo de Documento**: ${docName}  
**Jurisdicci√≥n**: Estados Unidos  
**Idioma**: Espa√±ol  
**√öltima Actualizaci√≥n**: ${new Date().toLocaleDateString()}

---

## Secciones Principales

### 1. Informaci√≥n de las Partes
- **Primera Parte**: {{party1Name}}
- **Direcci√≥n**: {{party1Address}}
- **Segunda Parte**: {{party2Name}}  
- **Direcci√≥n**: {{party2Address}}

### 2. T√©rminos y Condiciones
{{terms}}

### 3. Fecha Efectiva
Este acuerdo ser√° efectivo a partir del {{effectiveDate}}.

### 4. Disposiciones Adicionales
{{additionalProvisions}}

---

## Descargo de Responsabilidad Legal

Esta plantilla se proporciona √∫nicamente con fines informativos y no constituye asesoramiento legal. Consulte con un abogado calificado para obtener orientaci√≥n legal espec√≠fica para su situaci√≥n.

---

**Generado por 123LegalDoc**  
*Documentos Legales Profesionales Hechos Simples*
`;
}

// Document name mappings for better templates
const documentNames = {
  affidavit: { en: 'General Affidavit', es: 'Declaraci√≥n Jurada General' },
  'affidavit-general': {
    en: 'General Affidavit',
    es: 'Declaraci√≥n Jurada General',
  },
  'articles-of-incorporation': {
    en: 'Articles of Incorporation',
    es: 'Art√≠culos de Incorporaci√≥n',
  },
  'articles-of-incorporation-biz': {
    en: 'Business Articles of Incorporation',
    es: 'Art√≠culos de Incorporaci√≥n Comercial',
  },
  'boat-bill-of-sale': {
    en: 'Boat Bill of Sale',
    es: 'Contrato de Compraventa de Embarcaci√≥n',
  },
  'child-custody-agreement': {
    en: 'Child Custody Agreement',
    es: 'Acuerdo de Custodia de Menores',
  },
  'child-medical-consent': {
    en: 'Child Medical Consent',
    es: 'Consentimiento M√©dico Infantil',
  },
  'commercial-lease-agreement': {
    en: 'Commercial Lease Agreement',
    es: 'Contrato de Arrendamiento Comercial',
  },
  'consignment-agreement': {
    en: 'Consignment Agreement',
    es: 'Acuerdo de Consignaci√≥n',
  },
  'copyright-assignment': {
    en: 'Copyright Assignment',
    es: 'Cesi√≥n de Derechos de Autor',
  },
  'demand-letter': { en: 'Demand Letter', es: 'Carta de Demanda' },
  'demand-letter-payment': {
    en: 'Payment Demand Letter',
    es: 'Carta de Demanda de Pago',
  },
  'divorce-settlement': { en: 'Divorce Settlement', es: 'Acuerdo de Divorcio' },
  'divorce-settlement-agreement': {
    en: 'Divorce Settlement Agreement',
    es: 'Acuerdo de Liquidaci√≥n de Divorcio',
  },
  'employment-contract': {
    en: 'Employment Contract',
    es: 'Contrato de Empleo',
  },
  'employment-offer-letter': {
    en: 'Employment Offer Letter',
    es: 'Carta de Oferta de Empleo',
  },
  'employment-termination-letter': {
    en: 'Employment Termination Letter',
    es: 'Carta de Terminaci√≥n de Empleo',
  },
  'eviction-notice': { en: 'Eviction Notice', es: 'Aviso de Desalojo' },
  'general-inquiry': { en: 'General Inquiry', es: 'Consulta General' },
  'healthcare-power-of-attorney': {
    en: 'Healthcare Power of Attorney',
    es: 'Poder Notarial de Salud',
  },
  'independent-contractor-agreement': {
    en: 'Independent Contractor Agreement',
    es: 'Acuerdo de Contratista Independiente',
  },
  invoice: { en: 'Invoice', es: 'Factura' },
  'last-will-testament': {
    en: 'Last Will and Testament',
    es: '√öltimo Testamento',
  },
  'lease-agreement': { en: 'Lease Agreement', es: 'Contrato de Arrendamiento' },
  'licensing-agreement': {
    en: 'Licensing Agreement',
    es: 'Acuerdo de Licencia',
  },
  'living-trust': { en: 'Living Trust', es: 'Fideicomiso en Vida' },
  'living-will': { en: 'Living Will', es: 'Testamento en Vida' },
  'llc-operating-agreement': {
    en: 'LLC Operating Agreement',
    es: 'Acuerdo Operativo de LLC',
  },
  'loan-agreement': { en: 'Loan Agreement', es: 'Contrato de Pr√©stamo' },
  'medical-consent': { en: 'Medical Consent', es: 'Consentimiento M√©dico' },
  nda: { en: 'Non-Disclosure Agreement', es: 'Acuerdo de Confidencialidad' },
  'non-compete-agreement': {
    en: 'Non-Compete Agreement',
    es: 'Acuerdo de No Competencia',
  },
  'non-disclosure-agreement': {
    en: 'Non-Disclosure Agreement',
    es: 'Acuerdo de No Divulgaci√≥n',
  },
  'offer-letter': { en: 'Offer Letter', es: 'Carta de Oferta' },
  'operating-agreement': { en: 'Operating Agreement', es: 'Acuerdo Operativo' },
  'partnership-agreement': {
    en: 'Partnership Agreement',
    es: 'Acuerdo de Sociedad',
  },
  'power-of-attorney': { en: 'Power of Attorney', es: 'Poder Notarial' },
  'prenuptial-agreement': {
    en: 'Prenuptial Agreement',
    es: 'Acuerdo Prenupcial',
  },
  'promissory-note': { en: 'Promissory Note', es: 'Pagar√©' },
  'property-deed': { en: 'Property Deed', es: 'Escritura de Propiedad' },
  'purchase-agreement': { en: 'Purchase Agreement', es: 'Acuerdo de Compra' },
  'quitclaim-deed': { en: 'Quitclaim Deed', es: 'Escritura de Renuncia' },
  'rental-agreement': { en: 'Rental Agreement', es: 'Contrato de Alquiler' },
  'residential-lease-agreement': {
    en: 'Residential Lease Agreement',
    es: 'Contrato de Arrendamiento Residencial',
  },
  'service-agreement': { en: 'Service Agreement', es: 'Acuerdo de Servicios' },
  'severance-agreement': {
    en: 'Severance Agreement',
    es: 'Acuerdo de Indemnizaci√≥n',
  },
  'termination-letter': {
    en: 'Termination Letter',
    es: 'Carta de Terminaci√≥n',
  },
  'trademark-assignment': {
    en: 'Trademark Assignment',
    es: 'Cesi√≥n de Marca Registrada',
  },
  'vehicle-bill-of-sale': {
    en: 'Vehicle Bill of Sale',
    es: 'Contrato de Compraventa de Veh√≠culo',
  },
};

const documentDescriptions = {
  affidavit: {
    en: 'A sworn statement of facts made under oath for legal proceedings.',
    es: 'Una declaraci√≥n jurada de hechos hecha bajo juramento para procedimientos legales.',
  },
  'affidavit-general': {
    en: 'A general sworn statement document for various legal purposes.',
    es: 'Un documento de declaraci√≥n jurada general para varios prop√≥sitos legales.',
  },
  'articles-of-incorporation': {
    en: 'Legal document establishing a corporation as a separate legal entity.',
    es: 'Documento legal que establece una corporaci√≥n como entidad legal separada.',
  },
  // Add more descriptions as needed - using generic fallback for now
};

let createdCount = 0;
let skippedCount = 0;

// Process each document directory
documentDirs.forEach((dir) => {
  const enTemplatePath = path.join(enTemplatesDir, `${dir}.md`);
  const esTemplatePath = path.join(esTemplatesDir, `${dir}.md`);

  const hasEnTemplate = fs.existsSync(enTemplatePath);
  const hasEsTemplate = fs.existsSync(esTemplatePath);

  const docInfo = documentNames[dir] || {
    en: dir.replace(/-/g, ' ').replace(/\b\w/g, (l) => l.toUpperCase()),
    es: dir.replace(/-/g, ' ').replace(/\b\w/g, (l) => l.toUpperCase()),
  };

  const docDesc = documentDescriptions[dir] || {
    en: `Professional legal document template for ${docInfo.en.toLowerCase()}.`,
    es: `Plantilla de documento legal profesional para ${docInfo.es.toLowerCase()}.`,
  };

  let created = false;

  // Create English template if missing
  if (!hasEnTemplate) {
    const content = generateEnglishTemplate(dir, docInfo.en, docDesc.en);
    fs.writeFileSync(enTemplatePath, content);
    console.log(`‚úÖ Created EN template: ${dir}.md`);
    created = true;
  }

  // Create Spanish template if missing
  if (!hasEsTemplate) {
    const content = generateSpanishTemplate(dir, docInfo.es, docDesc.es);
    fs.writeFileSync(esTemplatePath, content);
    console.log(`‚úÖ Created ES template: ${dir}.md`);
    created = true;
  }

  if (created) {
    createdCount++;
  } else {
    skippedCount++;
  }
});

console.log(`\nüéØ Template Creation Summary:`);
console.log(`   ‚úÖ Documents with new templates: ${createdCount}`);
console.log(`   ‚è≠Ô∏è  Documents already complete: ${skippedCount}`);
console.log(`   üìÑ Total documents: ${documentDirs.length}`);

// Verify completion
const finalEnCount = fs
  .readdirSync(enTemplatesDir)
  .filter((f) => f.endsWith('.md')).length;
const finalEsCount = fs
  .readdirSync(esTemplatesDir)
  .filter((f) => f.endsWith('.md')).length;

console.log(`\nüìä Final Template Count:`);
console.log(`   üá∫üá∏ English templates: ${finalEnCount}`);
console.log(`   üá™üá∏ Spanish templates: ${finalEsCount}`);

if (
  finalEnCount >= documentDirs.length &&
  finalEsCount >= documentDirs.length
) {
  console.log(
    `\nüéâ SUCCESS! All ${documentDirs.length} documents now have both English and Spanish templates!`,
  );
} else {
  console.log(
    `\n‚ö†Ô∏è  Some templates may still be missing. Please review the output above.`,
  );
}

console.log(`\n‚ú® Template creation complete!`);
